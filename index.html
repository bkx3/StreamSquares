<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Stream Deck Icon Maker</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="page-header">
      <h1>Stream Deck Icon Maker</h1>
      <p>Create 512×512 icons with layers and export as PNG.</p>
    </header>
    <main class="app">
      <section class="preview-panel" aria-label="Preview">
        <div class="preview-frame" id="drop-zone" tabindex="0" aria-label="Icon preview. Drag and drop an image to load.">
          <canvas id="preview-canvas" width="512" height="512" aria-hidden="true"></canvas>
          <div class="actual-size-preview" id="actual-size-preview" hidden aria-hidden="true">
            <canvas class="actual-preview-canvas" width="256" height="256"></canvas>
          </div>
          <div class="drop-hint" id="drop-hint" hidden>Drop SVG or PNG</div>
        </div>
        <div class="preview-actions">
          <div class="preview-actions-left">
            <label class="toggle">
              <input type="checkbox" id="actual-size" />
              <span>Actual size</span>
            </label>
            <label class="toggle">
              <input type="checkbox" id="toggle-guides" />
              <span>Show guides</span>
            </label>
            <button type="button" id="reset-btn">Reset</button>
          </div>
          <div class="preview-actions-right">
            <span class="action-separator" aria-hidden="true">|</span>
            <button type="button" id="export-btn" class="primary">Export PNG</button>
            <button type="button" id="copy-btn" class="icon-action" aria-label="Copy to Clipboard">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <rect x="9" y="9" width="10" height="10" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="2" />
                <path d="M15 9V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
          </div>
        </div>
      </section>

      <aside class="sidebar">

        <div class="sidebar-tabs" role="tablist" aria-label="Sidebar tabs">
          <button type="button" class="tab-btn is-active" id="tab-symbol" role="tab" aria-selected="true" aria-controls="tab-panel-symbol">Symbol</button>
          <button type="button" class="tab-btn" id="tab-background" role="tab" aria-selected="false" aria-controls="tab-panel-background">Background</button>
          <button type="button" class="tab-btn" id="tab-text" role="tab" aria-selected="false" aria-controls="tab-panel-text">Text</button>
        </div>

        <div class="tab-panel" id="tab-panel-symbol" role="tabpanel" aria-labelledby="tab-symbol">
          <section class="panel">
            <div class="panel-content" id="symbol-panel-content">
          <div class="segmented" role="tablist" aria-label="Symbol source">
            <button type="button" class="segmented-btn is-active" id="symbol-tab-library" role="tab" aria-selected="true" aria-controls="symbol-library-panel">Library</button>
            <button type="button" class="segmented-btn" id="symbol-tab-upload" role="tab" aria-selected="false" aria-controls="symbol-upload-panel">Upload</button>
          </div>
          <div class="symbol-panel" id="symbol-upload-panel" role="tabpanel" hidden>
            <div class="field">
              <input type="file" id="symbol-input" accept="image/svg+xml,image/png" />
            </div>
          </div>
          <div class="symbol-panel" id="symbol-library-panel" role="tabpanel">
            <div class="field">
              <div class="icon-search-row">
                <input type="text" id="icon-search" placeholder="Search icons..." autocomplete="off" />
                <button type="button" class="icon-browse-toggle" id="icon-browse-toggle" aria-expanded="false" aria-controls="icon-browser">Browse</button>
              </div>
            </div>
            <div class="icon-browser" id="icon-browser" hidden>
              <div class="icon-grid" id="icon-grid" role="listbox" aria-label="Icon library"></div>
            </div>
          </div>
          <div class="symbol-meta" id="symbol-meta">
            <span id="symbol-name">No symbol loaded</span>
            <div class="symbol-meta-actions">
              <button type="button" id="clear-symbol" aria-label="Clear symbol">✕</button>
            </div>
          </div>
          <div class="thumb" id="symbol-thumb" aria-hidden="true" hidden></div>

          <div class="panel-cell" aria-label="Transform">
            <div class="panel-section-header">
              <h3 class="panel-section-title">Transform</h3>
              <button type="button" class="icon-action reset-transform" id="reset-transform" aria-label="Reset transform">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M3 12a9 9 0 1 0 3-6.7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M3 4v6h6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </button>
            </div>
            <div class="transform-grid" aria-label="Symbol transform">
              <div class="transform-inline-row" aria-label="Position">
                <span class="transform-inline-label" data-reset-target="symbol-pos-x,symbol-pos-y">Position</span>
                <div class="inline-pair">
                  <label class="inline-label drag-label" for="symbol-pos-x" data-target="symbol-pos-x" data-step="1">x</label>
                  <div class="stepper-vert">
                    <div class="stepper-value">
                      <input type="number" id="symbol-pos-x" min="0" max="512" step="1" value="106" />
                      <span class="unit">px</span>
                    </div>
                    <div class="stepper-arrows">
                      <button type="button" class="stepper-arrow" data-target="symbol-pos-x" data-step="1" aria-label="Increase X position">▲</button>
                      <button type="button" class="stepper-arrow" data-target="symbol-pos-x" data-step="-1" aria-label="Decrease X position">▼</button>
                    </div>
                  </div>
                </div>
              
                <div class="inline-pair">
                  <label class="inline-label drag-label" for="symbol-pos-y" data-target="symbol-pos-y" data-step="1">y</label>
                  <div class="stepper-vert">
                    <div class="stepper-value">
                      <input type="number" id="symbol-pos-y" min="0" max="512" step="1" value="106" />
                      <span class="unit">px</span>
                    </div>
                    <div class="stepper-arrows">
                      <button type="button" class="stepper-arrow" data-target="symbol-pos-y" data-step="1" aria-label="Increase Y position">▲</button>
                      <button type="button" class="stepper-arrow" data-target="symbol-pos-y" data-step="-1" aria-label="Decrease Y position">▼</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="transform-inline-row" aria-label="Rotation">
                <span class="transform-inline-label" data-reset-target="symbol-rotation">Rotation</span>
                <div class="rotation-dial" id="symbol-rotation-dial" role="slider" aria-valuemin="-180" aria-valuemax="180" aria-valuenow="0" tabindex="0">
                  <div class="rotation-dial-indicator" id="symbol-rotation-indicator"></div>
                </div>
                <div class="stepper-vert">
                  <div class="stepper-value">
                    <input type="number" id="symbol-rotation" min="-180" max="180" step="1" value="0" />
                    <span class="unit">°</span>
                  </div>
                </div>
              </div>
              <div class="transform-inline-row" aria-label="Scale">
                <span class="transform-inline-label drag-label" data-target="symbol-scale" data-step="1" data-reset-target="symbol-scale">Scale</span>
                <input type="range" id="symbol-scale-range" min="10" max="200" step="1" value="100" />
                <div class="stepper-vert">
                  <div class="stepper-value">
                    <input type="number" id="symbol-scale" min="10" max="200" step="1" value="100" />
                    <span class="unit">%</span>
                  </div>
                </div>
              </div>
              <div class="transform-inline-row" aria-label="Shear">
                <span class="transform-inline-label" data-reset-target="symbol-shear-x,symbol-shear-y">Shear</span>
                <div class="inline-pair">
                  <label class="inline-label drag-label" for="symbol-shear-x" data-target="symbol-shear-x" data-step="1">x</label>
                  <div class="stepper-vert">
                    <div class="stepper-value">
                      <input type="number" id="symbol-shear-x" min="-60" max="60" step="1" value="0" />
                      <span class="unit">°</span>
                    </div>
                    <div class="stepper-arrows">
                      <button type="button" class="stepper-arrow" data-target="symbol-shear-x" data-step="1" aria-label="Increase X shear">▲</button>
                      <button type="button" class="stepper-arrow" data-target="symbol-shear-x" data-step="-1" aria-label="Decrease X shear">▼</button>
                    </div>
                  </div>
                </div>
              
                <div class="inline-pair">
                  <label class="inline-label drag-label" for="symbol-shear-y" data-target="symbol-shear-y" data-step="1">y</label>
                  <div class="stepper-vert">
                    <div class="stepper-value">
                      <input type="number" id="symbol-shear-y" min="-60" max="60" step="1" value="0" />
                      <span class="unit">°</span>
                    </div>
                    <div class="stepper-arrows">
                      <button type="button" class="stepper-arrow" data-target="symbol-shear-y" data-step="1" aria-label="Increase Y shear">▲</button>
                      <button type="button" class="stepper-arrow" data-target="symbol-shear-y" data-step="-1" aria-label="Decrease Y shear">▼</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="panel-cell" aria-label="Appearance">
            <div class="panel-section-header">
              <h3 class="panel-section-title">Appearance</h3>
              <button type="button" class="icon-action reset-transform" id="reset-appearance" aria-label="Reset appearance">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M3 12a9 9 0 1 0 3-6.7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M3 4v6h6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </button>
            </div>
            <div class="transform-inline-row" aria-label="Appearance controls">
              <span class="transform-inline-label">Color</span>
              <input type="color" id="symbol-tint-color" value="#ffffff" aria-label="Tint color" />
              <div class="stepper-vert">
                <div class="stepper-value">
                  <input type="number" id="symbol-opacity" min="0" max="100" step="1" value="100" />
                  <span class="unit">%</span>
                </div>
                <div class="stepper-arrows">
                  <button type="button" class="stepper-arrow" data-target="symbol-opacity" data-step="1" aria-label="Increase opacity">▲</button>
                  <button type="button" class="stepper-arrow" data-target="symbol-opacity" data-step="-1" aria-label="Decrease opacity">▼</button>
                </div>
              </div>
            </div>
          </div>
            </div>
          </section>
        </div>

        <div class="tab-panel" id="tab-panel-background" role="tabpanel" aria-labelledby="tab-background" hidden>
          <section class="panel">
            <div class="panel-content" id="background-panel-content">
          <div class="field">
            <label for="background-mode">Mode</label>
            <select id="background-mode">
              <option value="solid">Solid</option>
              <option value="gradient">Linear Gradient</option>
              <option value="radial">Radial Gradient</option>
              <option value="image">Custom Image</option>
            </select>
          </div>
          <div class="field" id="background-color-row">
            <div class="color-picker-row">
              <button type="button" class="icon-toggle" id="background-gradient-toggle" aria-pressed="false" aria-label="Toggle gradient handles" title="Show gradient controls">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="2" />
                  <line x1="12" y1="2" x2="12" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                  <line x1="12" y1="18" x2="12" y2="22" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                  <line x1="2" y1="12" x2="6" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                  <line x1="18" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
              </button>
              <input type="color" id="background-solid" value="#202833" aria-label="Solid background color" />
              <input type="color" id="background-gradient-start" value="#1b1f2a" aria-label="Gradient start color" />
              <input type="color" id="background-gradient-end" value="#3a465b" aria-label="Gradient end color" />
              <div class="gradient-angle-inline" id="background-gradient-angle-row" aria-label="Gradient angle">
                <div class="rotation-dial" id="background-gradient-dial" role="slider" aria-valuemin="0" aria-valuemax="360" aria-valuenow="45" tabindex="0">
                  <div class="rotation-dial-indicator" id="background-gradient-indicator"></div>
                </div>
                <div class="stepper-vert">
                  <div class="stepper-value">
                    <input type="number" id="background-gradient-angle" min="0" max="360" step="1" value="45" />
                    <span class="unit">°</span>
                  </div>
                </div>
              </div>
              <div class="background-image-row" id="background-image-row" hidden>
                <input type="file" id="background-image-input" accept="image/*" hidden />
                <button type="button" id="background-image-upload">Upload</button>
                <span class="value" id="background-image-name">No image selected</span>
              </div>
            </div>
          </div>
            </div>
          </section>
        </div>

        <div class="tab-panel" id="tab-panel-text" role="tabpanel" aria-labelledby="tab-text" hidden>
          <section class="panel">
            <div class="panel-content" id="text-panel-content">
              <div class="panel-cell" aria-label="Text layers">
                <div class="panel-section-header">
                  <h3 class="panel-section-title">Layers</h3>
                  <div class="layer-actions">
                    <button type="button" id="text-layer-add">Add</button>
                    <button type="button" id="text-layer-remove">Remove</button>
                  </div>
                </div>
                <div class="layer-list" id="text-layer-list" role="listbox" aria-label="Text layers"></div>
              </div>

              <div class="panel-cell" aria-label="Text content">
                <h3 class="panel-section-title">Content</h3>
                <div class="field">
                  <input type="text" id="text-value" placeholder="Enter text" />
                </div>
                <div class="transform-inline-row text-content-row" aria-label="Text font, color, and size">
                  <select id="text-font" aria-label="Font">
                    <option value="'SF Pro', system-ui">SF Pro / system</option>
                    <option value="system-ui">system-ui</option>
                    <option value="Arial, sans-serif">Arial</option>
                    <option value="Helvetica, sans-serif">Helvetica</option>
                  </select>
                  <input type="color" id="text-color" class="round-color-picker" value="#ffffff" aria-label="Text color" />
                  <div class="stepper-vert">
                    <div class="stepper-value">
                      <input type="number" id="text-size" min="8" max="96" step="1" value="36" />
                      <span class="unit">px</span>
                    </div>
                    <div class="stepper-arrows">
                      <button type="button" class="stepper-arrow" data-target="text-size" data-step="1" aria-label="Increase text size">▲</button>
                      <button type="button" class="stepper-arrow" data-target="text-size" data-step="-1" aria-label="Decrease text size">▼</button>
                    </div>
                  </div>
                </div>
                <div class="transform-inline-row" aria-label="Stroke">
                  <label class="toggle" for="text-stroke">
                    <input type="checkbox" id="text-stroke" />
                    <span>Stroke</span>
                  </label>
                  <label class="inline-label drag-label" for="text-stroke-width" data-target="text-stroke-width" data-step="1">stroke</label>
                  <input type="color" id="text-stroke-color" class="round-color-picker" value="#000000" aria-label="Stroke color" />
                  <div class="stepper-vert">
                    <div class="stepper-value">
                      <input type="number" id="text-stroke-width" min="0" max="8" step="1" value="2" />
                      <span class="unit">px</span>
                    </div>
                    <div class="stepper-arrows">
                      <button type="button" class="stepper-arrow" data-target="text-stroke-width" data-step="1" aria-label="Increase stroke width">▲</button>
                      <button type="button" class="stepper-arrow" data-target="text-stroke-width" data-step="-1" aria-label="Decrease stroke width">▼</button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="panel-cell" aria-label="Text transform">
                <div class="panel-section-header">
                  <h3 class="panel-section-title">Transform</h3>
                  <button type="button" class="icon-action reset-transform" id="reset-text-transform" aria-label="Reset text transform">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path d="M3 12a9 9 0 1 0 3-6.7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M3 4v6h6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                  </button>
                </div>
                <div class="transform-grid" aria-label="Text transform">
                  <div class="transform-inline-row" aria-label="Position">
                    <span class="transform-inline-label">Position</span>
                    <div class="inline-pair">
                      <label class="inline-label drag-label" for="text-pos-x" data-target="text-pos-x" data-step="1">x</label>
                      <div class="stepper-vert">
                        <div class="stepper-value">
                          <input type="number" id="text-pos-x" min="0" max="512" step="1" value="256" />
                          <span class="unit">px</span>
                        </div>
                        <div class="stepper-arrows">
                          <button type="button" class="stepper-arrow" data-target="text-pos-x" data-step="1" aria-label="Increase X position">▲</button>
                          <button type="button" class="stepper-arrow" data-target="text-pos-x" data-step="-1" aria-label="Decrease X position">▼</button>
                        </div>
                      </div>
                    </div>

                    <div class="inline-pair">
                      <label class="inline-label drag-label" for="text-pos-y" data-target="text-pos-y" data-step="1">y</label>
                      <div class="stepper-vert">
                        <div class="stepper-value">
                          <input type="number" id="text-pos-y" min="0" max="512" step="1" value="488" />
                          <span class="unit">px</span>
                        </div>
                        <div class="stepper-arrows">
                          <button type="button" class="stepper-arrow" data-target="text-pos-y" data-step="1" aria-label="Increase Y position">▲</button>
                          <button type="button" class="stepper-arrow" data-target="text-pos-y" data-step="-1" aria-label="Decrease Y position">▼</button>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>

            </div>
          </section>
        </div>

        <div class="status" id="status" role="status" aria-live="polite"></div>
      </aside>
    </main>

    <canvas id="render-canvas" width="512" height="512" hidden></canvas>
    <script src="app.js"></script>
  </body>
</html>
